<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <script src="//unpkg.com/alpinejs" defer></script>
    <script src="app.js"></script>
    <title>AlpineJS</title>
</head>

<body x-data="App()" x-init="getCourses()">

    <div style="display: flex; justify-content: start;">
        <div x-show="page === 1">
            <h2>Courses</h2>
            <table>
                <template x-for="course in courses">
                    <tr>
                        <td x-text="course.course_id"></td>
                        <td>
                            <a href="#!" x-text="course.title" @click="Edit(`${course.course_id}`)"></a>
                        </td>
                        <td>
                            <a href="#!" x-text="course.dept_name" @click="getDept(`${course.dept_name}`)"></a>
                        </td>
                        <td x-text="course.credits"></td>
                    </tr>
                </template>
            </table>
        </div>
        <div x-show="Object.keys(dept).length !== 0 && page === 1">
            <h2>Departments</h2>
            <table class="hdr">
                <tr>
                    <th>Name : </th>
                    <td x-text="dept.dept_name"></td>
                </tr>
                <tr>
                    <th>Building : </th>
                    <td x-text="dept.building"></td>
                </tr>
                <tr>
                    <th>Budget : </th>
                    <td x-text="dept.budget"></td>
                </tr>

            </table>
            <pre x-text="JSON.stringify(dept, null, 4)"></pre>
        </div>
        <div x-show="page === 2">
            <h2>Edit</h2>
            <table class="hdr">
                <tr>
                    <th>Id : </th>
                    <td>
                        <input type="text" x-model="crs.course_id" size="3" />
                    </td>
                </tr>
                <tr>
                    <th>Title : </th>
                    <td>
                        <textarea x-model="crs.title"></textarea>
                    </td>
                </tr>
                <tr>
                    <th>Name : </th>
                    <td>
                        <!-- <input type="text" x-model="course.dept_name"/> -->
                        <select x-model="crs.dept_name">
                            <template x-for="dpt in depts">
                                <option x-text="dpt.dept_name" :selected="dpt.dept_name === crs.dept_name"></option>
                            </template>
                        </select>
                    </td>
                </tr>
                <tr>
                    <th>Credits : </th>
                    <td>
                        <input type="text" x-model="crs.credits" size="2" />
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <button @click="Save()">Save</button>
                    </td>
                </tr>
            </table>
            <pre x-text="JSON.stringify(crs, null, 4)"></pre>
        </div>

    </div>

</body>

</html>